# ZSH RC for Jesse Millwood

function check_for_plugin(){
    [ -d "$ZSH/plugins/$1" ] || [ -d "$ZSH_CUSTOM/plugins/$1" ]
}

export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="gnzh"
DISABLE_AUTO_UPDATE="true"
ENABLE_CORRECTION="true"

plugins=(
    git
    cargo
    cp
    colored-man-pages
    rsync
    themes
)

if check_for_plugin flatpak; then
    plugins+=( flatpak )
fi

source $ZSH/oh-my-zsh.sh
autoload -U compinit promptinit
compinit
promptinit

unsetopt sharehistory

export EDITOR="emacsclient -a '' -t -s Default "
export VISUAL="emacsclient -a '' -c -s Default "
# if [[ -n $SSH_CONNECTION ]]; then
#   export EDITOR='vim'
# else
#   export EDITOR='mvim'
# fi

# Packages outside of oh-my-zsh installed to /usr/local/share/zsh/site-functions
export ZSH_SITEFUNCTIONS_DIR=/usr/local/share/zsh/site-functions
if [ -d ${ZSH_SITEFUNCTIONS_DIR}/zsh-autosuggestions ]; then
    source ${ZSH_SITEFUNCTIONS_DIR}/zsh-autosuggestions/zsh-autosuggestions.zsh
fi

if [ -f ${ZSH_SITEFUNCTIONS_DIR}/zsh-syntax-highlighting.zsh ]; then
    source ${ZSH_SITEFUNCTIONS_DIR}/zsh-syntax-highlighting.zsh
fi

# Conditional PATH Additions _______________________________
if [ -d /opt/Appimages ]; then
    export PATH=/opt/Appimages:$PATH
fi

if [ -d /usr/local/go ]; then
    export PATH=/usr/local/go/bin:$PATH
fi

if [ -d $HOME/.local/bin ]; then
    export PATH=$PATH:$HOME/.local/bin
fi

if [ -d $HOME/.local/share/applications ]; then
    export XDG_DATA_DIRS=$HOME/.local/share/applications:${XDG_DATA_DIRS}
fi

# Personal aliases and functions ___________________________
function kill-emacsclient (){
    emacsclient -s Default -e '(save-buffers-kill-emacs)'
}

function kill-emacsclient-server (){
    emacsclient -s $1 -e '(save-buffers-kill-emacs)'
}

function ec () {
    emacsclient -a '' -c -s Default $1 &
}
function ect () {
    emacsclient -a '' -t -s Default $1
}

function ecs () {
    emacsclient -a '' -c -s $1 $2 &
}
function ects () {
    emacsclient -a '' -t -s $1 $2
}

function make-c-etags-table () {
    find . -name "*.[chCH]" -print | etags -
}

# OCAML Support ____________________________________________
if opam -v &> /dev/null; then
    eval $(opam env)
fi


# Local Variables:
# mode: sh
# End:
